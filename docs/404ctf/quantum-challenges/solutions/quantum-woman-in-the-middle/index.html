<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.6">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Le magicien quantique">
<meta name="dcterms.date" content="2024-05-12">

<title>Solution Challenge 2: Quantum Woman-In-The-Middle Attack – Sckathach’s posts</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../404ctf/quantum-challenges/solutions/multiple-systems/index.html" rel="next">
<link href="../../../../404ctf/quantum-challenges/solutions/introduction-to-rail-encoding/index.html" rel="prev">
<link href="../../../../assets/favicon.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-68d38218fc9705968688502b5ae76c5a.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-dark-a06631302a214a2c2396ea99b7df9cd0.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-85216576098aecd49195674863e2b633.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../../site_libs/bootstrap/bootstrap-dark-c0227b99d3f01e1798dee5690911bca8.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../../styles.css">
<meta property="og:title" content="Solution Challenge 2: Quantum Woman-In-The-Middle Attack – Sckathach’s posts">
<meta property="og:description" content="The very super website of the super Sckathach!">
<meta property="og:image" content="https://sckathach.github.io/404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index_files/figure-html/cell-4-output-3.png">
<meta property="og:site_name" content="Sckathach's posts">
<meta property="og:image:height" content="406">
<meta property="og:image:width" content="389">
<meta name="twitter:title" content="Solution Challenge 2: Quantum Woman-In-The-Middle Attack – Sckathach’s posts">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://sckathach.github.io/404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index_files/figure-html/cell-4-output-3.png">
<meta name="twitter:image-height" content="406">
<meta name="twitter:image-width" content="389">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">Sckathach’s posts</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../../../404ctf/index.html" aria-current="page"> 
<span class="menu-text">404 CTF</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../mech-interp/subspace-rerouting/index.html"> 
<span class="menu-text">SSR</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/sckathach" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../../404ctf/quantum-challenges/challenges/introduction-to-rail-encoding/index.html">Quantum Challenges</a></li><li class="breadcrumb-item"><a href="../../../../404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index.html">Quantum Woman in the Middle - Solution</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">404 CTF - Edition 2024</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Artificial Intelligence</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/artificial-intelligence/challenges/poison-1/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Poison [1/2]</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/artificial-intelligence/challenges/poison-2/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Poison [2/2]</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/artificial-intelligence/challenges/backdoor/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Backdoor</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/artificial-intelligence/challenges/poison-3/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Poison [3/2]</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/artificial-intelligence/solutions/poison-1/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Poison [1/2] - Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/artificial-intelligence/solutions/poison-2/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Poison [2/2] - Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/artificial-intelligence/solutions/backdoor/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Backdoor - Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/artificial-intelligence/solutions/poison-3/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Poison [3/2] - Solution</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Quantum Challenges</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/quantum-challenges/challenges/introduction-to-rail-encoding/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to rail encoding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/quantum-challenges/challenges/quantum-woman-in-the-middle/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quantum Woman in the Middle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/quantum-challenges/challenges/multiple-systems/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/quantum-challenges/challenges/reverse-engineering/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reverse Engineering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/quantum-challenges/solutions/introduction-to-rail-encoding/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to rail encoding - Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Quantum Woman in the Middle - Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/quantum-challenges/solutions/multiple-systems/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Systems - Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../404ctf/quantum-challenges/solutions/reverse-engineering/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reverse Engineering - Solution</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#before-we-begin" id="toc-before-we-begin" class="nav-link active" data-scroll-target="#before-we-begin"><span class="header-section-number">0.1</span> Before we begin</a>
  <ul class="collapse">
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples"><span class="header-section-number">0.1.1</span> Examples</a></li>
  </ul></li>
  <li><a href="#woman-in-the-middle" id="toc-woman-in-the-middle" class="nav-link" data-scroll-target="#woman-in-the-middle"><span class="header-section-number">1</span> Woman in the middle?</a>
  <ul class="collapse">
  <li><a href="#bb84-protocol-normal-usage" id="toc-bb84-protocol-normal-usage" class="nav-link" data-scroll-target="#bb84-protocol-normal-usage"><span class="header-section-number">1.1</span> BB84 Protocol: Normal Usage</a>
  <ul class="collapse">
  <li><a href="#step-1-alice-prepares-her-qubits-to-send" id="toc-step-1-alice-prepares-her-qubits-to-send" class="nav-link" data-scroll-target="#step-1-alice-prepares-her-qubits-to-send"><span class="header-section-number">1.1.1</span> Step 1: Alice prepares her qubits to send</a></li>
  <li><a href="#step-2-retrieval-by-bob-and-decoding" id="toc-step-2-retrieval-by-bob-and-decoding" class="nav-link" data-scroll-target="#step-2-retrieval-by-bob-and-decoding"><span class="header-section-number">1.1.2</span> Step 2: Retrieval by Bob and Decoding</a></li>
  <li><a href="#step-3-alice-and-bob-agree." id="toc-step-3-alice-and-bob-agree." class="nav-link" data-scroll-target="#step-3-alice-and-bob-agree."><span class="header-section-number">1.1.3</span> Step 3: Alice and Bob agree.</a></li>
  <li><a href="#step-4-verification-of-communication-integrity." id="toc-step-4-verification-of-communication-integrity." class="nav-link" data-scroll-target="#step-4-verification-of-communication-integrity."><span class="header-section-number">1.1.4</span> Step 4: Verification of communication integrity.</a></li>
  </ul></li>
  <li><a href="#protocol-bb84-eve-enters-the-scene" id="toc-protocol-bb84-eve-enters-the-scene" class="nav-link" data-scroll-target="#protocol-bb84-eve-enters-the-scene"><span class="header-section-number">1.2</span> Protocol BB84: Eve enters the scene</a>
  <ul class="collapse">
  <li><a href="#step-1-re-implement-the-protocol-by-adding-eve-in-the-middle-this-step-is-not-necessary-to-obtain-the-flag-but-recommended-to-facilitate-the-rest" id="toc-step-1-re-implement-the-protocol-by-adding-eve-in-the-middle-this-step-is-not-necessary-to-obtain-the-flag-but-recommended-to-facilitate-the-rest" class="nav-link" data-scroll-target="#step-1-re-implement-the-protocol-by-adding-eve-in-the-middle-this-step-is-not-necessary-to-obtain-the-flag-but-recommended-to-facilitate-the-rest"><span class="header-section-number">1.2.1</span> Step 1: Re-implement the protocol by adding Eve in the middle <em>(this step is not necessary to obtain the flag, but recommended to facilitate the rest)</em></a></li>
  <li><a href="#step-2-eve-counterattacks-find-a-way-to-bring-down-the-average-error-rate-to-20-or-below." id="toc-step-2-eve-counterattacks-find-a-way-to-bring-down-the-average-error-rate-to-20-or-below." class="nav-link" data-scroll-target="#step-2-eve-counterattacks-find-a-way-to-bring-down-the-average-error-rate-to-20-or-below."><span class="header-section-number">1.2.2</span> Step 2: Eve counterattacks, find a way to bring down the average error rate to <span class="math inline">\(20\%\)</span> (or below).</a></li>
  </ul></li>
  <li><a href="#flag-recovery" id="toc-flag-recovery" class="nav-link" data-scroll-target="#flag-recovery"><span class="header-section-number">1.3</span> Flag Recovery</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.dev/Sckathach/Sckathach.github.io/blob/main/404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/Sckathach/Sckathach.github.io/blob/main/404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index.ipynb" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/Sckathach/Sckathach.github.io/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../../404ctf/quantum-challenges/challenges/introduction-to-rail-encoding/index.html">Quantum Challenges</a></li><li class="breadcrumb-item"><a href="../../../../404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index.html">Quantum Woman in the Middle - Solution</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Solution Challenge 2: Quantum Woman-In-The-Middle Attack</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Le magicien quantique </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 12, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div id="initial_id" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:38.188197Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:36.658137Z&quot;}" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> perceval <span class="im">as</span> pcvl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="before-we-begin" class="level2" data-number="0.1">
<h2 data-number="0.1" class="anchored" data-anchor-id="before-we-begin"><span class="header-section-number">0.1</span> Before we begin</h2>
<p>Here are some utilities:</p>
<div id="fcd0864c-b449-4f8d-b81e-6749d8241f1d" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:38.625154Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:38.189906Z&quot;}" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> perceval <span class="im">import</span> pdisplay, PS, BS, Circuit, BasicState, Processor, StateVector</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> perceval.backends <span class="im">import</span> BackendFactory</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> perceval.algorithm <span class="im">import</span> Analyzer</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> exqalibur <span class="im">import</span> FockState</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> qiskit.visualization <span class="im">import</span> plot_bloch_multivector</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> qiskit.quantum_info <span class="im">import</span> Statevector</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> pi, cos, sin</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's go back to our rail encoding</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>qubits <span class="op">=</span> {</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"0"</span>: BasicState([<span class="dv">1</span>, <span class="dv">0</span>]),</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span>: BasicState([<span class="dv">0</span>, <span class="dv">1</span>])</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>qubits_ <span class="op">=</span> {qubits[k]: k <span class="cf">for</span> k <span class="kw">in</span> qubits}</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>sqlist <span class="op">=</span> [qubits[<span class="st">"0"</span>], qubits[<span class="st">"1"</span>]]</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Circuit analysis</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> analyze(circuit: Circuit, input_states: Optional[FockState] <span class="op">=</span> <span class="va">None</span>, output_states: Optional[FockState] <span class="op">=</span> <span class="va">None</span>) <span class="op">\</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> input_states <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        input_states <span class="op">=</span> sqlist</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> output_states <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        output_states <span class="op">=</span> sqlist</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> Processor(<span class="st">"Naive"</span>, circuit)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> Analyzer(p, input_states, output_states, mapping<span class="op">=</span>qubits_)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    pdisplay(a)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Circuit analysis by calculating the amplitudes</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> amplitudes(circuit: Circuit, input_state: Optional[FockState] <span class="op">=</span> <span class="va">None</span>, output_states: Optional[FockState] <span class="op">=</span> <span class="va">None</span>) <span class="op">\</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">-&gt;</span> (<span class="bu">complex</span>, <span class="bu">complex</span>):</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> input_state <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        input_state <span class="op">=</span> qubits[<span class="st">"0"</span>]</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> output_states <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        output_states <span class="op">=</span> sqlist</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> BackendFactory.get_backend(<span class="st">"Naive"</span>)</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    b.set_circuit(circuit)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    b.set_input_state(input_state)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {qubits_[k]: roundc(b.prob_amplitude(k)) <span class="cf">for</span> k <span class="kw">in</span> output_states}</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Display of the Bloch sphere</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> circuit_to_state_vector(circuit: Circuit) <span class="op">-&gt;</span> Statevector:</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    ampl0, ampl1 <span class="op">=</span> amplitudes(circuit)</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Statevector([ampl0, ampl1])</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>plot_bloch <span class="op">=</span> <span class="kw">lambda</span> circuit : plot_bloch_multivector(circuit_to_state_vector(circuit))</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Rotations</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>x_rot <span class="op">=</span> <span class="kw">lambda</span> x: Circuit(<span class="dv">2</span>) <span class="op">//</span> (<span class="dv">0</span>, PS(pi)) <span class="op">//</span> BS.Rx(theta<span class="op">=</span>x) <span class="op">//</span> (<span class="dv">0</span>, PS(pi)) </span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>y_rot <span class="op">=</span> <span class="kw">lambda</span> x: BS.Ry(theta<span class="op">=</span>x)</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>z_rot <span class="op">=</span> <span class="kw">lambda</span> x: BS.H() <span class="op">//</span> x_rot(x) <span class="op">//</span> BS.H() </span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Trigonometry with Matplotlib</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_trig(angles, colors<span class="op">=</span><span class="va">None</span>, annotations<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> <span class="fl">1.5</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> colors <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>        colors <span class="op">=</span> [<span class="st">"blue"</span>] <span class="op">*</span> <span class="bu">len</span>(angles)</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> annotations <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>        annotations <span class="op">=</span> [<span class="st">""</span>] <span class="op">*</span> <span class="bu">len</span>(angles)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> angle, color, annotation <span class="kw">in</span> <span class="bu">zip</span>(angles, colors, annotations):</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>        pos_x <span class="op">=</span> r <span class="op">*</span> cos(angle)</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>        pos_y <span class="op">=</span> r <span class="op">*</span> sin(angle)</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>        plt.plot([<span class="dv">0</span>, pos_x], [<span class="dv">0</span>, pos_y], color<span class="op">=</span>color)</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>        pos_x_a <span class="op">=</span> pos_x <span class="op">+</span> np.sign(pos_x) <span class="op">*</span> <span class="fl">0.1</span> <span class="op">-</span> (<span class="fl">0.05</span> <span class="op">*</span> <span class="bu">len</span>(annotation) <span class="cf">if</span> np.sign(pos_x) <span class="op">&lt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>        pos_y_a <span class="op">=</span> pos_y <span class="op">+</span> np.sign(pos_y) <span class="op">*</span> <span class="fl">0.1</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>        plt.gca().annotate(annotation, xy<span class="op">=</span>(pos_x_a, pos_y_a), xycoords<span class="op">=</span><span class="st">'data'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>    plt.plot(<span class="dv">0</span>, <span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> np.linspace(<span class="dv">0</span> <span class="op">*</span> pi, <span class="dv">2</span> <span class="op">*</span> pi, <span class="dv">100</span>)</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    xs, ys <span class="op">=</span> r <span class="op">*</span> cos(a), r <span class="op">*</span> sin(a)</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    plt.plot(xs, ys, color<span class="op">=</span><span class="st">"black"</span>)</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>    plt.xlim(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>    plt.ylim(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>    plt.gca().set_aspect(<span class="st">'equal'</span>)</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Version of `round()` for complex numbers</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> roundc(c: <span class="bu">complex</span>, decimals: <span class="bu">int</span> <span class="op">=</span> <span class="dv">2</span>) <span class="op">-&gt;</span> <span class="bu">complex</span>:</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">round</span>(c.real, decimals) <span class="op">+</span> <span class="bu">round</span>(c.imag, decimals) <span class="op">*</span> <span class="ot">1j</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="examples" class="level3" data-number="0.1.1">
<h3 data-number="0.1.1" class="anchored" data-anchor-id="examples"><span class="header-section-number">0.1.1</span> Examples</h3>
<div id="719ee610-4df9-40ce-9293-acf55ad256f7" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.047981Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:38.626071Z&quot;}" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>hadamard_gate <span class="op">=</span> BS.H()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(amplitudes(hadamard_gate))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>analyze(hadamard_gate)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>plot_bloch(hadamard_gate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'0': (0.71+0j), '1': (0.71+0j)}</code></pre>
</div>
<div class="cell-output cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td>1/2</td>
<td>1/2</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td>1/2</td>
<td>1/2</td>
</tr>
</tbody>
</table>
</div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-4-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Not only the Bloch sphere can be used to represent qubits, we can simply use a trigonometric circle. The transition is explicit: <strong>the abscissa corresponds to <span class="math inline">\(|0\rangle\)</span> and the ordinate to <span class="math inline">\(|1\rangle\)</span></strong>, so <span class="math inline">\(|+\rangle\)</span> is at <span class="math inline">\(\frac{\pi}{4}\)</span>. All states are on the circle, as the sum of probabilities, which here is an amplitude, is always <span class="math inline">\(1\)</span>. However, with this display, we lose information about the global phase.</p>
<p>For example, here are the canonical basis (in blue) and the Hadamard basis (in red):</p>
<div id="5b10e24f-e65a-431e-914a-6b2524ecc8a4" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.164309Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.048995Z&quot;}" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>plot_trig([<span class="dv">0</span>, pi<span class="op">/</span><span class="dv">2</span>, pi<span class="op">/</span><span class="dv">4</span>, <span class="op">-</span>pi<span class="op">/</span><span class="dv">4</span>], [<span class="st">"blue"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"red"</span>], [<span class="st">"|0&gt;"</span>, <span class="st">"|1&gt;"</span>, <span class="st">"|+&gt;"</span>, <span class="st">"|-&gt;"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>For this challenge, as we don’t need phase but want to visualize multiple bases at the same time, we will use only the representation with the trigonometric circle.</p>
</section>
</section>
<section id="woman-in-the-middle" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Woman in the middle?</h1>
<p>You all know the classic Man-In-The-Middle attack, where an attacker intercepts communication between two entities who are unaware that their conversation is being eavesdropped. Today, I propose you to discover the <strong>quantum version!</strong> <strong>Alice</strong> and <strong>Bob</strong> (yes, them again, even physicists are fans) decide to exchange a secret key using the <strong>BB84 protocol</strong>. Being confident in the reliability of their protocol, they tolerate some noise. However, <strong>Eve</strong> manages to intercept the communication channel. Will she succeed in going unnoticed?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="memes/challenge_2-english.jpg" class="img-fluid figure-img"></p>
<figcaption>table_cat_meme.jpg</figcaption>
</figure>
</div>
<section id="bb84-protocol-normal-usage" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="bb84-protocol-normal-usage"><span class="header-section-number">1.1</span> BB84 Protocol: Normal Usage</h2>
<p>The BB84 protocol allows the exchange of a key of <span class="math inline">\(n\)</span> bits with <span class="math inline">\(4n\)</span> qubits. It is based on the principle that if someone were to eavesdrop on the conversation, that person would be forced to <strong>measure</strong> the qubits, thus collapsing the associated wave functions (a measurement is a projection and thus a loss of information). <strong>This collapse is thus visible</strong>, introducing a <span class="math inline">\(25\%\)</span> error rate during the verification step.</p>
<section id="step-1-alice-prepares-her-qubits-to-send" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="step-1-alice-prepares-her-qubits-to-send"><span class="header-section-number">1.1.1</span> Step 1: Alice prepares her qubits to send</h3>
<p><strong>1.a)</strong> First, a key is needed, for which a random binary string of size <span class="math inline">\(4n\)</span> is generated.</p>
<p><em>It is possible to generate this string using a quantum computer for better quality randomness.</em></p>
<div id="790d1fbb-389d-4b59-be10-65b5ea092da5" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.170618Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.167263Z&quot;}" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>bits_alice <span class="op">=</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>1.b)</strong> Alice will then choose <span class="math inline">\(4n\)</span> random bases from <span class="math inline">\({+, \times}\)</span>, in which she will encode her qubits. <em>(Please excuse the confusion between the <span class="math inline">\(+\)</span> basis and the <span class="math inline">\(|+\rangle\)</span> state, which are not related; I am following the same conventions as the literature)</em>.</p>
<p>The + basis is the canonical basis:</p>
<p><span class="math display">\[
+ = \left\{ \begin{pmatrix} 1 \\ 0 \end{pmatrix}, \begin{pmatrix} 0 \\ 1 \end{pmatrix}\right\}
\]</span></p>
<p>While the × basis is defined by:</p>
<p><span class="math display">\[
\times = \left\{\frac{1}{\sqrt{2}}\begin{pmatrix} 1 \\ 1 \end{pmatrix}, \frac{1}{\sqrt{2}}\begin{pmatrix} -1 \\ 1 \end{pmatrix}\right\}
\]</span></p>
<p>We can visualize them:</p>
<div id="cc8ff088-9aac-4987-b0dd-9afcf4563d55" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.298291Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.171908Z&quot;}" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>plot_trig([<span class="dv">0</span>, pi<span class="op">/</span><span class="dv">2</span>, pi<span class="op">/</span><span class="dv">4</span>, <span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">4</span>], [<span class="st">"blue"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"red"</span>], [<span class="st">"0 (+)"</span>, <span class="st">"1 (+)"</span>, <span class="st">"0 (x)"</span>, <span class="st">"1 (x)"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The encoding is fully represented in this diagram: <span class="math inline">\(1\)</span> in the <span class="math inline">\(\times\)</span> basis will be encoded as: <span class="math display">\[
-\frac{\sqrt{2}}{2} \begin{pmatrix} 1 \\ 0 \end{pmatrix} + \frac{\sqrt{2}}{2} \begin{pmatrix} 0 \\ 1 \end{pmatrix} =  -\frac{1}{\sqrt{2}} |0\rangle + \frac{1}{\sqrt{2}} |1\rangle
\]</span></p>
<p><em>As a reminder, with the rail encoding we saw earlier, this becomes:</em> <span class="math display">\[
-\frac{1}{\sqrt{2}} |1, 0\rangle\rangle + \frac{1}{\sqrt{2}} |0, 1\rangle\rangle
\]</span> <em>We use this notation for Fock states (the rails), to avoid confusion with the multi-state <span class="math inline">\(|10\rangle\)</span> that we will discover later.</em></p>
<p><em>No matter what name we give to our basis vectors, here the canonical one, it obviously doesn’t change the calculations. I haven’t specified it, but (almost) everything done in the context of this competition is reproducible on quantum computers with different technologies. You just need to adapt the qubit encoding, the calculations remain the same.</em></p>
<div id="a7777d13-edb4-4356-ac2f-366b80687f8b" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.302652Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.299434Z&quot;}" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>bases_alice <span class="op">=</span> np.array([<span class="st">"+"</span> <span class="cf">if</span> b <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"x"</span> <span class="cf">for</span> b <span class="kw">in</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>1.c)</strong> Alice can now encode her <span class="math inline">\(4n\)</span> qubits in her <span class="math inline">\(4n\)</span> bases. <em>I use <code>StateVector</code>, which is a generalization of <code>BasicState</code> we encountered. This allows me to perform operations on the states more easily, without worrying about normalization, which is done automatically.</em></p>
<p><strong><em>&gt;&gt; Be careful with <code>StateVector</code>s, they can be tricky, <code>3 * a + b</code> works, while <code>a + 3 * b</code> does not!</em></strong> <em>Also, beware of confusion between Qiskit’s <code>Statevector</code> and Perceval’s <code>StateVector</code>, we use both…</em></p>
<div id="a0983c22-6573-43c4-b681-4baeeb301c23" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.324583Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.303970Z&quot;}" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>qubits_alice <span class="op">=</span> []</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># To test more easily, I define the values of 0 and 1 in the X basis, be careful, these are no longer </span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># BasicState, but StateVector, so you need to use the measure function (see below) to manipulate them</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>qubits[<span class="st">"0x"</span>] <span class="op">=</span> qubits[<span class="st">"0"</span>] <span class="op">+</span> qubits[<span class="st">"1"</span>] </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>qubits[<span class="st">"1x"</span>] <span class="op">=</span> qubits[<span class="st">"1"</span>] <span class="op">-</span> qubits[<span class="st">"0"</span>] </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(qubits[<span class="st">"0"</span>]), <span class="bu">type</span>(qubits[<span class="st">"0x"</span>]))</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bit, basis  <span class="kw">in</span> <span class="bu">zip</span>(bits_alice, bases_alice):</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> basis <span class="op">==</span> <span class="st">"+"</span>:</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> pcvl.StateVector(qubits[<span class="st">"0"</span>]) <span class="cf">if</span> bit <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> pcvl.StateVector(qubits[<span class="st">"1"</span>])</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>: </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> qubits[<span class="st">"0x"</span>] <span class="cf">if</span> bit <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> qubits[<span class="st">"1x"</span>]</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    qubits_alice.append(s)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Displaying the first 9 to verify:</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(qubits_alice) <span class="op">&lt;</span> <span class="dv">10</span>: </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Bit à encoder : </span><span class="sc">{</span>bit<span class="sc">}</span><span class="ss">, base choisie : </span><span class="sc">{</span>basis<span class="sc">}</span><span class="ss">, qubit correspondant : </span><span class="sc">{</span>s<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'exqalibur.FockState'&gt; &lt;class 'exqalibur.StateVector'&gt;
Bit à encoder : 0, base choisie : +, qubit correspondant : |1,0&gt;
Bit à encoder : 0, base choisie : +, qubit correspondant : |1,0&gt;
Bit à encoder : 1, base choisie : +, qubit correspondant : |0,1&gt;
Bit à encoder : 1, base choisie : x, qubit correspondant : -sqrt(2)/2*|1,0&gt;+sqrt(2)/2*|0,1&gt;
Bit à encoder : 0, base choisie : x, qubit correspondant : sqrt(2)/2*|0,1&gt;+sqrt(2)/2*|1,0&gt;
Bit à encoder : 1, base choisie : +, qubit correspondant : |0,1&gt;
Bit à encoder : 1, base choisie : +, qubit correspondant : |0,1&gt;
Bit à encoder : 1, base choisie : x, qubit correspondant : -sqrt(2)/2*|1,0&gt;+sqrt(2)/2*|0,1&gt;
Bit à encoder : 0, base choisie : +, qubit correspondant : |1,0&gt;</code></pre>
</div>
</div>
<p>Now that Alice has prepared her qubits, she can send them to Bob. <em>For example, using a photon.</em></p>
</section>
<section id="step-2-retrieval-by-bob-and-decoding" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="step-2-retrieval-by-bob-and-decoding"><span class="header-section-number">1.1.2</span> Step 2: Retrieval by Bob and Decoding</h3>
<p>Bob <strong>does not know the bases in which the qubits were encoded</strong>, so he will randomly choose <span class="math inline">\(4n\)</span> bases like Alice, and will measure Alice’s qubits. Only half of the bits will be correct, as he has a fifty-fifty chance each time of choosing the same basis as Alice.</p>
<p>Once he has measured the photons, they have collapsed, and no one can have them anymore. This is an important concept to understand. In the classical world, we can send a message while keeping a version of its content on our side; it’s not as if every message we send is erased from our phone and memory. In the quantum world, however, this is the case! There is even a dedicated theorem: the <strong>no-cloning theorem.</strong> We cannot take an arbitrary unknown quantum state and have a device that returns two copies of that state. This is obviously very practical in the cyber world. We can take actions after measurement with guarantees.</p>
<p><strong>2.a)</strong> Bob randomly chooses <span class="math inline">\(4n\)</span> bases:</p>
<div id="d267b387-433d-4856-99a9-a3ec2400a1b7" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.329232Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.325743Z&quot;}" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>bases_bob <span class="op">=</span> np.array([<span class="st">"+"</span> <span class="cf">if</span> b <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"x"</span> <span class="cf">for</span> b <span class="kw">in</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span><span class="op">*</span>N,))])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To simulate a measurement, we will use the “SLOS” processor:</p>
<div id="888492bd-b203-474e-b4bc-d88bd5b6577c" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.334121Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.331048Z&quot;}">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> measure(input_state, circuit, full<span class="op">=</span><span class="va">False</span>):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> pcvl.Processor(<span class="st">"SLOS"</span>, circuit)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    p.with_input(input_state)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    sampler <span class="op">=</span> pcvl.algorithm.Sampler(p)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Complete measurement made with 1000 attempts, so we end up with a result similar to the </span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Analyzer.</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> full:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        sample_count <span class="op">=</span> sampler.sample_count(<span class="dv">1000</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> sample_count[<span class="st">'results'</span>]</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    sample_count <span class="op">=</span> sampler.sample_count(<span class="dv">1</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">list</span>(sample_count[<span class="st">'results'</span>].keys())[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>2.b)</strong> Bob prepares the circuits necessary for these measurements.</p>
<p>To measure in the <span class="math inline">\(+\)</span> basis, it is sufficient to take the identity since it is our canonical basis:</p>
<div id="5aef301b-f117-4f16-b9e9-73a5083dddce" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.337874Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.335252Z&quot;}" data-execution_count="11">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>base_p <span class="op">=</span> Circuit(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>One can verify:</p>
<div id="fe655c22-ac48-41ee-a450-65e9b918db25" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.357170Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.338903Z&quot;}" data-execution_count="12">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"""</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ss">0 dans la base + : </span><span class="sc">{</span>measure(qubits[<span class="st">"0"</span>], base_p, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="ss">1 dans la base + : </span><span class="sc">{</span>measure(qubits[<span class="st">"1"</span>], base_p, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="ss">0 dans la base x (</span><span class="sc">{</span>qubits[<span class="st">"0x"</span>]<span class="sc">}</span><span class="ss">) mesurée dans la base + : </span><span class="sc">{</span>measure(qubits[<span class="st">"0x"</span>], base_p, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="ss">1 dans la base x (</span><span class="sc">{</span>qubits[<span class="st">"1x"</span>]<span class="sc">}</span><span class="ss">) mesurée dans la base + : </span><span class="sc">{</span>measure(qubits[<span class="st">"1x"</span>], base_p, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
0 dans la base + : {
  |1,0&gt;: 1000
}
1 dans la base + : {
  |0,1&gt;: 1000
}
0 dans la base x (sqrt(2)/2*|0,1&gt;+sqrt(2)/2*|1,0&gt;) mesurée dans la base + : {
  |1,0&gt;: 486
  |0,1&gt;: 514
}
1 dans la base x (-sqrt(2)/2*|1,0&gt;+sqrt(2)/2*|0,1&gt;) mesurée dans la base + : {
  |0,1&gt;: 505
  |1,0&gt;: 495
}</code></pre>
</div>
</div>
<p>As expected, there’s no way to determine Alice’s bit if Bob chooses the wrong base. We do the same for the x base. This time, we use a rotation of <span class="math inline">\(-\frac{\pi}{4}\)</span> (transition from the x base to our canonical base). I use a rotation <span class="math inline">\(y\)</span> with an angle of <span class="math inline">\(-\frac{\pi}{2}\)</span> for this, due to differences in conventions between the Bloch sphere and our trigonometric circle.</p>
<div id="34df1fad-ae2b-4c86-a346-043df65864be" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.363442Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.358231Z&quot;}">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>base_x <span class="op">=</span> y_rot(<span class="op">-</span>pi<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"""</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="ss">0 in the x base: </span><span class="sc">{</span>measure(qubits[<span class="st">"0x"</span>], base_x, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="ss">1 in the x base: </span><span class="sc">{</span>measure(qubits[<span class="st">"1x"</span>], base_x, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="ss">0 in the + base (</span><span class="sc">{</span>qubits[<span class="st">"0"</span>]<span class="sc">}</span><span class="ss">) measured in the x base: </span><span class="sc">{</span>measure(qubits[<span class="st">"0"</span>], base_x, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="ss">1 in the + base (</span><span class="sc">{</span>qubits[<span class="st">"1"</span>]<span class="sc">}</span><span class="ss">) measured in the x base: </span><span class="sc">{</span>measure(qubits[<span class="st">"1"</span>], base_x, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>2.c)</strong> Bob measures the qubits sent by Alice in his bases.</p>
<div id="e2d788e3c72857b1" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.564514Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.365932Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="14">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>bits_bob <span class="op">=</span> []</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> q, b <span class="kw">in</span> <span class="bu">zip</span>(qubits_alice, bases_bob): </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> b <span class="op">==</span> <span class="st">"+"</span>:</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        bits_bob.append(<span class="dv">0</span> <span class="cf">if</span> measure(q, base_p) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        bits_bob.append(<span class="dv">0</span> <span class="cf">if</span> measure(q, base_x) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>bits_bob <span class="op">=</span> np.array(bits_bob)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On peut calculer la correspondance avec la clef d’Alice :</p>
<div id="5b2fd853543a310c" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.569658Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.565399Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="15">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>correspondance_secret_key_bits_bob <span class="op">=</span> bits_bob <span class="op">==</span> bits_alice</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(correspondance_secret_key_bits_bob) <span class="op">/</span> (<span class="dv">4</span> <span class="op">*</span> N)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>0.76</code></pre>
</div>
</div>
<p>We have approximately <span class="math inline">\(\sim 75%\)</span> equivalence: in <span class="math inline">\(50%\)</span> of the cases, Alice and Bob have the same basis, hence the same values. There is an additional <span class="math inline">\(25%\)</span> because when they do not have the same basis, there is a <span class="math inline">\(50%\)</span> success rate.</p>
</section>
<section id="step-3-alice-and-bob-agree." class="level3" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="step-3-alice-and-bob-agree."><span class="header-section-number">1.1.3</span> Step 3: Alice and Bob agree.</h3>
<p>Once the qubits have been measured by Bob, Bob will <strong>make his bases public</strong>, and Alice will then tell him where there is a match, and therefore where they can be sure to have the same values.</p>
<div id="2f9d02c40f9e63e2" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.578729Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.571006Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="16">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>correspondance_bases_alice_bob <span class="op">=</span> bases_bob <span class="op">==</span> bases_alice </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>half_bits_bob <span class="op">=</span> bits_bob[correspondance_bases_alice_bob]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>half_bits_alice <span class="op">=</span> bits_alice[correspondance_bases_alice_bob]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">CAUTION</span><span class="co">: Do not rerun this cell alone; rerun the entire notebook to refresh this cell correctly.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-4-verification-of-communication-integrity." class="level3" data-number="1.1.4">
<h3 data-number="1.1.4" class="anchored" data-anchor-id="step-4-verification-of-communication-integrity."><span class="header-section-number">1.1.4</span> Step 4: Verification of communication integrity.</h3>
<p>To verify that there has been no eavesdropping, Alice and Bob will <strong>make half of their common key public</strong>. If there is a total match, then we are sure that no one has eavesdropped.</p>
<div id="246f7575e147d631" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.583365Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.579940Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="17">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>last_slice <span class="op">=</span> <span class="bu">len</span>(half_bits_bob) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>verification <span class="op">=</span> half_bits_bob[:last_slice] <span class="op">==</span> half_bits_alice[:last_slice]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Match percentage: </span><span class="sc">{</span><span class="bu">int</span>(np.<span class="bu">sum</span>(verification) <span class="op">/</span> last_slice <span class="op">*</span> <span class="dv">100</span>)<span class="sc">}</span><span class="ss">%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Pourcentage de correspondance : 100%</code></pre>
</div>
</div>
<p>Hence, <em>in fine</em>, the secret key has a length approximately equal to <span class="math inline">\(n\)</span> (One can find an <span class="math inline">\(n'\)</span> such that the probability of having <span class="math inline">\(|key| &gt; n\)</span> is arbitrarily large, then cut it to <span class="math inline">\(n\)</span>):</p>
<div id="5e272b07c520896" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.588055Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.584567Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="18">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>secret_key <span class="op">=</span> half_bits_bob[last_slice:]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Secret key: </span><span class="sc">{</span>secret_key<span class="sc">}</span><span class="ss">, length: </span><span class="sc">{</span><span class="bu">len</span>(secret_key)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Secret key : [0 1 1 0 0 0 0 0 0 1 1 1 1 1 0 0 0 1 1 0 0 0 0 0 1 0 0 1 1 1 0 1 0 0 0 0 1
 1 1 1 1 0 0 1 0 1 0 0 0 0 0 0 0 0 0 1 0 0 1 1 1 0 1 1 0 1 1 0 1 1 0 1 1 1
 0 0 1 1 0 1 0 0 0 1 1 0 1 1 1 1 0 0 0 1 0 0 1], taille : 97</code></pre>
</div>
</div>
</section>
</section>
<section id="protocol-bb84-eve-enters-the-scene" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="protocol-bb84-eve-enters-the-scene"><span class="header-section-number">1.2</span> Protocol BB84: Eve enters the scene</h2>
<p>Everything is identical, except now Eve intercepts the communication and tries to deduce part of the exchanged key.</p>
<section id="step-1-re-implement-the-protocol-by-adding-eve-in-the-middle-this-step-is-not-necessary-to-obtain-the-flag-but-recommended-to-facilitate-the-rest" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="step-1-re-implement-the-protocol-by-adding-eve-in-the-middle-this-step-is-not-necessary-to-obtain-the-flag-but-recommended-to-facilitate-the-rest"><span class="header-section-number">1.2.1</span> Step 1: Re-implement the protocol by adding Eve in the middle <em>(this step is not necessary to obtain the flag, but recommended to facilitate the rest)</em></h3>
<p>Eve first uses the same strategy as Bob and Alice. She pretends to be Bob and then Alice, performing the same encoding/decoding actions.</p>
<div id="39bc542994318f51" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.968699Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.589104Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="19">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Alice prepares her qubits.</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>bits_alice <span class="op">=</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>bases_alice <span class="op">=</span> np.array([<span class="st">"+"</span> <span class="cf">if</span> b <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"x"</span> <span class="cf">for</span> b <span class="kw">in</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))])</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>qubits_alice <span class="op">=</span> []</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bit, basis  <span class="kw">in</span> <span class="bu">zip</span>(bits_alice, bases_alice):</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> basis <span class="op">==</span> <span class="st">"+"</span>:</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> pcvl.StateVector(qubits[<span class="st">"0"</span>]) <span class="cf">if</span> bit <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> pcvl.StateVector(qubits[<span class="st">"1"</span>])</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> qubits[<span class="st">"0x"</span>] <span class="cf">if</span> bit <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> qubits[<span class="st">"1x"</span>]</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    qubits_alice.append(s)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Eve intercepts them and applies the same method as Bob, pretending to be him. </span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>bases_eve <span class="op">=</span> np.array([<span class="st">"+"</span> <span class="cf">if</span> b <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"x"</span> <span class="cf">for</span> b <span class="kw">in</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))])</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>bits_eve <span class="op">=</span> []</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> q, b <span class="kw">in</span> <span class="bu">zip</span>(qubits_alice, bases_eve):</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> b <span class="op">==</span> <span class="st">"+"</span>:</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>        bits_eve.append(<span class="dv">0</span> <span class="cf">if</span> measure(q, base_p) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>        bits_eve.append(<span class="dv">0</span> <span class="cf">if</span> measure(q, base_x) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>bits_eve <span class="op">=</span> np.array(bits_eve)</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="co"># She then sends the corresponding qubits to pretend to be Alice. </span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>qubits_eve <span class="op">=</span> []</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bit, basis  <span class="kw">in</span> <span class="bu">zip</span>(bits_eve, bases_eve):</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> basis <span class="op">==</span> <span class="st">"+"</span>:</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> pcvl.StateVector(qubits[<span class="st">"0"</span>]) <span class="cf">if</span> bit <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> pcvl.StateVector(qubits[<span class="st">"1"</span>])</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> qubits[<span class="st">"0x"</span>] <span class="cf">if</span> bit <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> qubits[<span class="st">"1x"</span>]</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    qubits_eve.append(s)</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Bob receives the qubits from Eve and applies the same methods as before. </span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>bases_bob <span class="op">=</span> np.array([<span class="st">"+"</span> <span class="cf">if</span> b <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"x"</span> <span class="cf">for</span> b <span class="kw">in</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))])</span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>bits_bob <span class="op">=</span> []</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> q, b <span class="kw">in</span> <span class="bu">zip</span>(qubits_eve, bases_bob):</span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> b <span class="op">==</span> <span class="st">"+"</span>:</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>        bits_bob.append(<span class="dv">0</span> <span class="cf">if</span> measure(q, base_p) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>        bits_bob.append(<span class="dv">0</span> <span class="cf">if</span> measure(q, base_x) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>bits_bob <span class="op">=</span> np.array(bits_bob)</span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Final step: sharing the results. </span></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>correspondance_bases_alice_bob <span class="op">=</span> bases_bob <span class="op">==</span> bases_alice</span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>half_bits_alice <span class="op">=</span> bits_alice[correspondance_bases_alice_bob]</span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>half_bits_bob <span class="op">=</span> bits_bob[correspondance_bases_alice_bob]</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>last_slice <span class="op">=</span> <span class="bu">len</span>(half_bits_alice) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Verification of proper execution. </span></span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>verification <span class="op">=</span> half_bits_alice[:last_slice] <span class="op">==</span> half_bits_bob[:last_slice]</span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>correspondance_percentage <span class="op">=</span> <span class="bu">int</span>(np.<span class="bu">sum</span>(verification) <span class="op">/</span> last_slice <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Match percentage: </span><span class="sc">{</span>correspondance_percentage<span class="sc">}</span><span class="ss">%, error of: </span><span class="sc">{</span><span class="dv">100</span> <span class="op">-</span> correspondance_percentage<span class="sc">}</span><span class="ss">%."</span>)</span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a>secret_key_step_1 <span class="op">=</span> half_bits_bob[:last_slice]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Pourcentage de correspondance : 68%, d'où une erreur de 32%.</code></pre>
</div>
</div>
<p>By performing the calculations, it is shown that the error rate averages <span class="math inline">\(25\%\)</span>. By exchanging a large number of bits, we approach this average, thereby detecting eavesdropping.</p>
<div id="43fe14ffe2d88764" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:39.972161Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:39.969606Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(secret_key_step_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0 0 0 0 1 1 1 1 0 1 1 1 0 0 1 0 1 0 1 1 0 1 0 0 0 0 1 1 0 0 1 0 0 0 1 1 1
 1 0 1 0 1 0 1 1 0 1 1 0 1 1 1 1 0 1 1 0 0 0 0 1 0 0 0 1 1 0 1 1 0 0 1 1 1
 1 1 1 0 1 1 0 1 0 1 1 1 1 0 1 1 1 0 1]</code></pre>
</div>
</div>
<p>It’s not exactly the key yet; error correction codes will still be needed for Alice and Bob to end up with the same key. For the purposes of this challenge, we will stop here.</p>
<p>In this case, Eve gets detected. However, it’s possible to reduce the error, albeit slightly, to make it appear as noise. Let’s simplify by assuming that an error rate below <span class="math inline">\(20\%\)</span> is considered as noise.</p>
</section>
<section id="step-2-eve-counterattacks-find-a-way-to-bring-down-the-average-error-rate-to-20-or-below." class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="step-2-eve-counterattacks-find-a-way-to-bring-down-the-average-error-rate-to-20-or-below."><span class="header-section-number">1.2.2</span> Step 2: Eve counterattacks, find a way to bring down the average error rate to <span class="math inline">\(20\%\)</span> (or below).</h3>
<p>The protocol remains the same; the only adjustable parameters are the measurement bases to measure Alice’s qubits and the qubits to send to Bob. The matching percentage should be above <span class="math inline">\(79\)</span> for <span class="math inline">\(N = 5000\)</span> to pass the tests.</p>
<h1 style="color:green">
Solution:
</h1>
<p>To increase accuracy when capturing and sending back qubits, Eve can use the Breidbart basis. Detailed explanations are provided, for example, in the paper <a href="A_new_attack_strategy_for_BB84_protocol_based_on_Breidbart_basis.pdf">A new attack strategy for BB94 protocol based on Beidbart basis</a>.</p>
<p>The intuition behind this choice of basis is that while mistakes will still be made each time, they will be “less” severe.</p>
<div id="41e27e0aba5b462e" class="cell" data-is_executing="true" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="21">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>plot_trig([<span class="dv">0</span>, pi<span class="op">/</span><span class="dv">2</span>, pi<span class="op">/</span><span class="dv">4</span>, <span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">4</span>, pi<span class="op">/</span><span class="dv">8</span>, <span class="dv">5</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">8</span>], [<span class="st">"blue"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"green"</span>], [<span class="st">"0 (+)"</span>, <span class="st">"1 (+)"</span>, <span class="st">"0 (x)"</span>, <span class="st">"1 (x)"</span>, <span class="st">"0 (b)"</span>, <span class="st">"1 (b)"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-22-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="5f1a6de2-de45-41ca-81bf-bc6e899a09d4" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-05-18T07:57:08.492312Z&quot;,&quot;start_time&quot;:&quot;2024-05-18T07:57:08.137404Z&quot;}" data-execution_count="22">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Breidbart's qubits can be defined by:</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>qubits[<span class="st">"0b"</span>] <span class="op">=</span> pcvl.StateVector(qubits[<span class="st">"0"</span>]) <span class="op">+</span> qubits[<span class="st">"0x"</span>]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>qubits[<span class="st">"1b"</span>] <span class="op">=</span> pcvl.StateVector(qubits[<span class="st">"1"</span>]) <span class="op">+</span> qubits[<span class="st">"1x"</span>]</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># And the Breidbart's basis: </span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>base_b <span class="op">=</span> y_rot(<span class="op">-</span>pi<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co"># One can verify with: </span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"""</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="ss">0 in base b: </span><span class="sc">{</span>measure(qubits[<span class="st">"0b"</span>], base_b, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="ss">1 in base b: </span><span class="sc">{</span>measure(qubits[<span class="st">"1b"</span>], base_b, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="ss">0 in base + (</span><span class="sc">{</span>qubits[<span class="st">"0"</span>]<span class="sc">}</span><span class="ss">) measured in base b: </span><span class="sc">{</span>measure(qubits[<span class="st">"0"</span>], base_b, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="ss">1 in base + (</span><span class="sc">{</span>qubits[<span class="st">"1"</span>]<span class="sc">}</span><span class="ss">) measured in base b: </span><span class="sc">{</span>measure(qubits[<span class="st">"1"</span>], base_b, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="ss">0 in base x (</span><span class="sc">{</span>qubits[<span class="st">"0x"</span>]<span class="sc">}</span><span class="ss">) measured in base b: </span><span class="sc">{</span>measure(qubits[<span class="st">"0x"</span>], base_b, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="ss">1 in base x (</span><span class="sc">{</span>qubits[<span class="st">"1x"</span>]<span class="sc">}</span><span class="ss">) measured in base b: </span><span class="sc">{</span>measure(qubits[<span class="st">"1x"</span>], base_b, full<span class="op">=</span><span class="va">True</span>)<span class="sc">}</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
0 dans la base b : {
  |1,0&gt;: 1000
}
1 dans la base b : {
  |0,1&gt;: 1000
}
0 dans la base + (|1,0&gt;) mesurée dans la base b : {
  |1,0&gt;: 865
  |0,1&gt;: 135
}
1 dans la base + (|0,1&gt;) mesurée dans la base b : {
  |1,0&gt;: 169
  |0,1&gt;: 831
}
0 dans la base x (sqrt(2)/2*|0,1&gt;+sqrt(2)/2*|1,0&gt;) mesurée dans la base b : {
  |1,0&gt;: 838
  |0,1&gt;: 162
}
1 dans la base x (-sqrt(2)/2*|1,0&gt;+sqrt(2)/2*|0,1&gt;) mesurée dans la base b : {
  |1,0&gt;: 150
  |0,1&gt;: 850
}</code></pre>
</div>
</div>
<div id="c1354aa7d6187475" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:59.026395Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:54.534202Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="23">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Alice prepares her qubits.</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>bits_alice <span class="op">=</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>bases_alice <span class="op">=</span> np.array([<span class="st">"+"</span> <span class="cf">if</span> b <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"x"</span> <span class="cf">for</span> b <span class="kw">in</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))])</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>qubits_alice <span class="op">=</span> []</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bit, basis  <span class="kw">in</span> <span class="bu">zip</span>(bits_alice, bases_alice):</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> basis <span class="op">==</span> <span class="st">"+"</span>:</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> pcvl.StateVector(qubits[<span class="st">"0"</span>]) <span class="cf">if</span> bit <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> pcvl.StateVector(qubits[<span class="st">"1"</span>])</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> qubits[<span class="st">"0x"</span>] <span class="cf">if</span> bit <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> qubits[<span class="st">"1x"</span>]</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    qubits_alice.append(s)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Intercepting...</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>bits_eve <span class="op">=</span> np.array([<span class="dv">0</span> <span class="cf">if</span> measure(q, base_b) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span> <span class="cf">for</span> q <span class="kw">in</span> qubits_alice])</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Sending...</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>qubits_eve <span class="op">=</span> []</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> b <span class="kw">in</span> bits_eve:</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> b <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>        qubits_eve.append(qubits[<span class="st">"0b"</span>])</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>        qubits_eve.append(qubits[<span class="st">"1b"</span>])</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Bob receives the qubits from Eve and applies the same methods as before. </span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>bases_bob <span class="op">=</span> np.array([<span class="st">"+"</span> <span class="cf">if</span> b <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"x"</span> <span class="cf">for</span> b <span class="kw">in</span> np.random.randint(low<span class="op">=</span><span class="dv">0</span>, high<span class="op">=</span><span class="dv">2</span>, size<span class="op">=</span>(<span class="dv">4</span> <span class="op">*</span> N,))])</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>bits_bob <span class="op">=</span> []</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> q, b <span class="kw">in</span> <span class="bu">zip</span>(qubits_eve, bases_bob):</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> b <span class="op">==</span> <span class="st">"+"</span>:</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>        bits_bob.append(<span class="dv">0</span> <span class="cf">if</span> measure(q, base_p) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>        bits_bob.append(<span class="dv">0</span> <span class="cf">if</span> measure(q, base_x) <span class="op">==</span> qubits[<span class="st">"0"</span>] <span class="cf">else</span> <span class="dv">1</span>)</span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>bits_bob <span class="op">=</span> np.array(bits_bob)</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Final step: sharing the results. </span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>correspondance_bases_alice_bob <span class="op">=</span> bases_bob <span class="op">==</span> bases_alice</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>half_bits_alice <span class="op">=</span> bits_alice[correspondance_bases_alice_bob]</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>half_bits_bob <span class="op">=</span> bits_bob[correspondance_bases_alice_bob]</span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>last_slice <span class="op">=</span> <span class="bu">len</span>(half_bits_alice) <span class="op">//</span> <span class="dv">2</span></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Verification of proper execution. </span></span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>verification <span class="op">=</span> half_bits_alice[:last_slice] <span class="op">==</span> half_bits_bob[:last_slice]</span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>correspondance_percentage <span class="op">=</span> <span class="bu">int</span>(np.<span class="bu">sum</span>(verification) <span class="op">/</span> last_slice <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Match percentage: </span><span class="sc">{</span>correspondance_percentage<span class="sc">}</span><span class="ss">%, error of: </span><span class="sc">{</span><span class="dv">100</span> <span class="op">-</span> correspondance_percentage<span class="sc">}</span><span class="ss">%."</span>)</span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>secret_key_step_1 <span class="op">=</span> half_bits_bob[:last_slice]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Pourcentage de correspondance : 80%, d'où une erreur de 20%.</code></pre>
</div>
</div>
</section>
</section>
<section id="flag-recovery" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="flag-recovery"><span class="header-section-number">1.3</span> Flag Recovery</h2>
<p>The day I manage to get <code>pcvl.random_seed(66)</code> to work, I will ask you for the keys. In the meantime, I would like the two bases used in step 2, as well as the two types of qubits sent by Eve.</p>
<p><em>Feel free to DM me if you encounter any issues (sckathach on Discord).</em></p>
<div id="446ba3c812bf5057" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:43.872284Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:43.868226Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="24">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests <span class="im">as</span> rq</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> circuit_to_list(circuit: Circuit) <span class="op">-&gt;</span> List[List[Tuple[<span class="bu">float</span>, <span class="bu">float</span>]]]:</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [[(x.real, x.imag) <span class="cf">for</span> x <span class="kw">in</span> l] <span class="cf">for</span> l <span class="kw">in</span> np.array(circuit.compute_unitary())]</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> state_vector_to_list(sv: StateVector) <span class="op">-&gt;</span> List[Tuple[<span class="bu">float</span>, <span class="bu">float</span>]]:</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">type</span>(sv) <span class="kw">is</span> <span class="kw">not</span> StateVector:</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        sv <span class="op">=</span> pcvl.StateVector(sv)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    sv.normalize()</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> [(<span class="fl">0.</span>, <span class="fl">0.</span>), (<span class="fl">0.</span>, <span class="fl">0.</span>)]</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k, v <span class="kw">in</span> sv:</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>        r[<span class="bu">int</span>(qubits_[k])] <span class="op">=</span> (v.real, v.imag)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> r</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> list_to_state_vector(p: List[Tuple[<span class="bu">float</span>, <span class="bu">float</span>]]) <span class="op">-&gt;</span> StateVector:</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">complex</span>(p[<span class="dv">0</span>][<span class="dv">0</span>], p[<span class="dv">0</span>][<span class="dv">1</span>]) <span class="op">*</span> StateVector([<span class="dv">1</span>, <span class="dv">0</span>]) <span class="op">+</span> <span class="bu">complex</span>(p[<span class="dv">1</span>][<span class="dv">0</span>], p[<span class="dv">1</span>][<span class="dv">1</span>]) <span class="op">*</span> StateVector([<span class="dv">0</span>, <span class="dv">1</span>]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="17e4920685b492a8" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:43.878108Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:43.873530Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="25">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example with the protocol of step one: </span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># example_base_eve_1 = base_p </span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># example_base_eve_2 = base_x</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># example_qubit_eve_1 = qubits["0"]</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># example_qubit_eve_2 = qubits["1"]</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co"># example_qubit_eve_3 = qubits["0x"]</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># example_qubit_eve_4 = qubits["1x"]</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> {</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"base_eve_1"</span>: circuit_to_list(base_b),</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"base_eve_2"</span>: circuit_to_list(base_b),</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"qubit_eve_1"</span>: state_vector_to_list(qubits[<span class="st">"0b"</span>]),</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"qubit_eve_2"</span>: state_vector_to_list(qubits[<span class="st">"1b"</span>]),</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"qubit_eve_3"</span>: state_vector_to_list(qubits[<span class="st">"0b"</span>]),</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"qubit_eve_4"</span>: state_vector_to_list(qubits[<span class="st">"1b"</span>])</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co"># raise NotImplementedError</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="936fd60ce121b3ac" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:44.473837Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:43.879568Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="26">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>URL <span class="op">=</span> <span class="st">"http://localhost:8000"</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>rq.get(URL <span class="op">+</span> <span class="st">"/healthcheck"</span>).json()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>{'message': 'Statut : en pleine forme !'}</code></pre>
</div>
</div>
<div id="e7dd3ad532bdc49" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-04-27T18:29:44.475070Z&quot;,&quot;start_time&quot;:&quot;2024-04-27T18:29:44.474978Z&quot;}" data-jupyter="{&quot;outputs_hidden&quot;:false}" data-execution_count="27">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>rq.post(URL <span class="op">+</span> <span class="st">"/challenges/2"</span>, json<span class="op">=</span>d).json()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>{'message': 'GG ! Voici le drapeau : 404CTF{m0Y3nN3m3Nt_d1sCR3t_t0ut_d3_M3m3}'}</code></pre>
</div>
</div>
<p><code>m0Y3nN3m3Nt_d1sCR3t_t0ut_d3_M3m3</code>, <em>Moyennement discret tout de même</em> means Moderately discreet though…</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/sckathach\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../../404ctf/quantum-challenges/solutions/introduction-to-rail-encoding/index.html" class="pagination-link" aria-label="Introduction to rail encoding - Solution">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction to rail encoding - Solution</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../../404ctf/quantum-challenges/solutions/multiple-systems/index.html" class="pagination-link" aria-label="Multiple Systems - Solution">
        <span class="nav-page-text">Multiple Systems - Solution</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Sckathach's post - Content that's both brilliant and terrible until observed
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.dev/Sckathach/Sckathach.github.io/blob/main/404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/Sckathach/Sckathach.github.io/blob/main/404ctf/quantum-challenges/solutions/quantum-woman-in-the-middle/index.ipynb" class="toc-action"><i class="bi empty"></i>View source</a></li><li><a href="https://github.com/Sckathach/Sckathach.github.io/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://sckathach.github.io">
<p>Home</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../../../about.html">
<p>About</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>